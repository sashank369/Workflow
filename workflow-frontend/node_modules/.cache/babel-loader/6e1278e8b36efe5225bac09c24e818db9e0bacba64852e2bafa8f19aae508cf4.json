{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sashank Reddy\\\\Desktop\\\\Assigment\\\\workflow-frontend\\\\src\\\\pages\\\\ApproverDashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"../axiosInstance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ApproverDashboard = () => {\n  _s();\n  const [pendingSubmissions, setPendingSubmissions] = useState([]);\n  const [selectedSubmission, setSelectedSubmission] = useState(null);\n  const [nextState, setNextState] = useState(\"\");\n  const [availableTransitions, setAvailableTransitions] = useState([]);\n  useEffect(() => {\n    fetchPending();\n  }, []);\n  const fetchPending = async () => {\n    const res = await axios.get(\"/pending-approvals/\");\n    setPendingSubmissions(res.data);\n  };\n  const selectSubmission = async submission => {\n    setSelectedSubmission(submission);\n    const res = await axios.get(`/transitions/${submission.id}/`);\n    setAvailableTransitions(res.data);\n  };\n  const handleTransition = async () => {\n    if (!nextState) return alert(\"Please select next state\");\n    const res = await axios.post(\"/transition/\", {\n      submission_id: selectedSubmission.id,\n      next_state: nextState\n    });\n    alert(\"Transitioned successfully\");\n    setSelectedSubmission(null);\n    setNextState(\"\");\n    fetchPending();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold mb-4\",\n      children: \"Approver Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-2\",\n          children: \"Pending Submissions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this), pendingSubmissions.map(sub => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border p-2 mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-bold\",\n            children: sub.form_template.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Submitted by: \", sub.submitted_by]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Current State: \", sub.current_state]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"mt-2 bg-blue-500 text-white px-2 py-1 rounded\",\n            onClick: () => selectSubmission(sub),\n            children: \"View & Transition\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 15\n          }, this)]\n        }, sub.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), selectedSubmission && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-2\",\n          children: \"Submission Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          className: \"text-sm bg-gray-100 p-2 mb-2\",\n          children: JSON.stringify(selectedSubmission.data, null, 2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block mb-2\",\n          children: \"Select Next State:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: nextState,\n          onChange: e => setNextState(e.target.value),\n          className: \"border p-2 mb-4 w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- Select --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this), availableTransitions.map((t, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: t.to_state,\n            children: t.to_state\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-green-600 text-white px-3 py-1 rounded\",\n          onClick: handleTransition,\n          children: \"Transition\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n};\n_s(ApproverDashboard, \"GrkwNRylhSvBAGKZwMQO11WjOv0=\");\n_c = ApproverDashboard;\nexport default ApproverDashboard;\nvar _c;\n$RefreshReg$(_c, \"ApproverDashboard\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","ApproverDashboard","_s","pendingSubmissions","setPendingSubmissions","selectedSubmission","setSelectedSubmission","nextState","setNextState","availableTransitions","setAvailableTransitions","fetchPending","res","get","data","selectSubmission","submission","id","handleTransition","alert","post","submission_id","next_state","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","sub","form_template","name","submitted_by","current_state","onClick","JSON","stringify","value","onChange","e","target","t","i","to_state","_c","$RefreshReg$"],"sources":["C:/Users/Sashank Reddy/Desktop/Assigment/workflow-frontend/src/pages/ApproverDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"../axiosInstance\";\n\nconst ApproverDashboard = () => {\n  const [pendingSubmissions, setPendingSubmissions] = useState([]);\n  const [selectedSubmission, setSelectedSubmission] = useState(null);\n  const [nextState, setNextState] = useState(\"\");\n  const [availableTransitions, setAvailableTransitions] = useState([]);\n\n  useEffect(() => {\n    fetchPending();\n  }, []);\n\n  const fetchPending = async () => {\n    const res = await axios.get(\"/pending-approvals/\");\n    setPendingSubmissions(res.data);\n  };\n\n  const selectSubmission = async (submission) => {\n    setSelectedSubmission(submission);\n    const res = await axios.get(`/transitions/${submission.id}/`);\n    setAvailableTransitions(res.data);\n  };\n\n  const handleTransition = async () => {\n    if (!nextState) return alert(\"Please select next state\");\n    const res = await axios.post(\"/transition/\", {\n      submission_id: selectedSubmission.id,\n      next_state: nextState,\n    });\n    alert(\"Transitioned successfully\");\n    setSelectedSubmission(null);\n    setNextState(\"\");\n    fetchPending();\n  };\n\n  return (\n    <div className=\"p-4\">\n      <h2 className=\"text-xl font-bold mb-4\">Approver Dashboard</h2>\n\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <h3 className=\"font-semibold mb-2\">Pending Submissions</h3>\n          {pendingSubmissions.map((sub) => (\n            <div key={sub.id} className=\"border p-2 mb-2\">\n              <div className=\"font-bold\">{sub.form_template.name}</div>\n              <div>Submitted by: {sub.submitted_by}</div>\n              <div>Current State: {sub.current_state}</div>\n              <button\n                className=\"mt-2 bg-blue-500 text-white px-2 py-1 rounded\"\n                onClick={() => selectSubmission(sub)}\n              >\n                View & Transition\n              </button>\n            </div>\n          ))}\n        </div>\n\n        {selectedSubmission && (\n          <div className=\"border p-4\">\n            <h3 className=\"font-semibold mb-2\">Submission Details</h3>\n            <pre className=\"text-sm bg-gray-100 p-2 mb-2\">\n              {JSON.stringify(selectedSubmission.data, null, 2)}\n            </pre>\n            <label className=\"block mb-2\">Select Next State:</label>\n            <select\n              value={nextState}\n              onChange={(e) => setNextState(e.target.value)}\n              className=\"border p-2 mb-4 w-full\"\n            >\n              <option value=\"\">-- Select --</option>\n              {availableTransitions.map((t, i) => (\n                <option key={i} value={t.to_state}>\n                  {t.to_state}\n                </option>\n              ))}\n            </select>\n            <button\n              className=\"bg-green-600 text-white px-3 py-1 rounded\"\n              onClick={handleTransition}\n            >\n              Transition\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ApproverDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}